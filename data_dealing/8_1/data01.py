import numpy as np

laser_dist = [
    [1.509, 6.064, 7.573, 1.899, 1.862],  # 第一组
    [1.509, 6.064, 7.573, 1.898, 1.862],  # 第二组
    [1.509, 6.064, 7.573, 1.898, 1.862],  # 第三组
    [1.509, 6.063, 7.573, 1.898, 1.862],  # 第四组
    [1.509, 6.063, 7.573, 1.898, 1.862],  # 第五组
    [1.509, 6.063, 7.573, 1.898, 1.862],  # 第六组
    [1.509, 6.063, 7.573, 1.9, 1.862],    # 第七组
    [1.509, 6.064, 7.573, 1.9, 1.862],    # 第八组
    [1.509, 6.064, 7.573, 1.9, 1.862],    # 第九组
    [1.509, 6.064, 7.574, 1.9, 1.862],    # 第十组
    [1.509, 6.064, 7.574, 1.9, 1.862],    # 第十一组
    [1.509, 6.062, 7.574, 1.898, 1.862],  # 第十二组
    [1.509, 6.062, 7.574, 1.898, 1.862],  # 第十三组
    [1.509, 6.062, 7.573, 1.898, 1.862],  # 第十四组
    [1.509, 6.062, 7.573, 1.896, 1.862],  # 第十五组
    [1.509, 6.063, 7.573, 1.896, 1.862],  # 第十六组
    [1.509, 6.063, 7.573, 1.896, 1.862],  # 第十七组
    [1.509, 6.063, 7.573, 1.896, 1.862],  # 第十八组
    [1.509, 6.063, 7.573, 1.9, 1.862],    # 第十九组
    [1.509, 6.063, 7.573, 1.9, 1.862],    # 第二十组
    [1.509, 6.063, 7.573, 1.9, 1.862],    # 第二十一组
    [1.509, 6.063, 7.573, 1.899, 1.862],  # 第二十二组
    [1.509, 6.063, 7.573, 1.899, 1.862],  # 第二十三组
    [1.509, 6.063, 7.573, 1.899, 1.862],  # 第二十四组
    [1.509, 6.063, 7.574, 1.899, 1.862],  # 第二十五组
    [1.509, 6.063, 7.574, 1.899, 1.862],  # 第二十六组
    [1.509, 6.063, 7.574, 1.899, 1.862],  # 第二十七组
    [1.509, 6.063, 7.573, 1.899, 1.862],  # 第二十八组
    [1.509, 6.063, 7.573, 1.898, 1.862],  # 第二十九组
    [1.509, 6.062, 7.573, 1.898, 1.862],  # 第三十组
    [1.509, 6.062, 7.574, 1.9, 1.862],    # 第三十一组
    [1.509, 6.062, 7.574, 1.9, 1.862],    # 第三十二组
    [1.509, 6.062, 7.574, 1.9, 1.862],    # 第三十三组
    [1.509, 6.063, 7.574, 1.899, 1.862],  # 第三十四组
    [1.509, 6.063, 7.574, 1.899, 1.862],  # 第三十五组
    [1.509, 6.063, 7.573, 1.899, 1.862],  # 第三十六组
    [1.509, 6.063, 7.573, 1.899, 1.862],  # 第三十七组
    [1.509, 6.063, 7.574, 1.899, 1.862]   # 第三十八组
]

def remove_outliers_3sigma(column_data):
    """基于3σ准则剔除异常值"""
    data = np.array(column_data)
    mean, std = np.mean(data), np.std(data)
    mask = np.abs(data - mean) <= 3 * std  # 保留在μ±3σ内的数据
    filtered_data = data[mask]
    
    # 迭代检查直到无异常值（或数据量过少）
    while len(filtered_data) > 0 and np.any(np.abs(filtered_data - np.mean(filtered_data)) > 3 * np.std(filtered_data)):
        mean, std = np.mean(filtered_data), np.std(filtered_data)
        mask = np.abs(filtered_data - mean) <= 3 * std
        filtered_data = filtered_data[mask]
    return filtered_data

# 处理每一列数据并计算均值
filtered_means = []
for i in range(5):  # 共5列数据
    column_data = [row[i] for row in laser_dist]
    filtered_data = remove_outliers_3sigma(column_data)
    if len(filtered_data) > 0:
        filtered_means.append(np.mean(filtered_data))
    else:
        filtered_means.append(np.nan)  # 标记无效列

# 输出处理后的均值
for mean in filtered_means:
    print(f"{float(mean):.3f}")

"""
1.509
6.063
7.573
1.899
1.862
"""