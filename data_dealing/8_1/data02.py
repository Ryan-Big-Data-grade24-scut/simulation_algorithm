import numpy as np
laser_dist = [
    [6.706, 5.074, 2.572, 7.146, 6.423],  # 第一组
    [6.706, 5.074, 2.572, 7.146, 6.423],  # 第二组
    [6.706, 5.074, 2.572, 7.146, 6.423],  # 第三组
    [6.706, 5.074, 2.581, 7.146, 6.423],  # 第四组
    [6.706, 5.074, 2.581, 7.146, 6.423],  # 第五组
    [6.706, 5.074, 2.581, 7.146, 6.423],  # 第六组
    [6.705, 5.074, 2.581, 7.146, 6.423],  # 第七组
    [6.705, 5.074, 2.581, 7.146, 6.423],  # 第八组
    [6.705, 5.074, 2.572, 7.146, 6.423],  # 第九组
    [6.705, 5.074, 2.572, 7.146, 6.423],  # 第十组
    [6.706, 5.074, 2.58, 7.146, 6.423],   # 第十一组
    [6.706, 5.072, 2.58, 7.146, 6.423],   # 第十二组
    [6.706, 5.072, 2.58, 7.146, 6.423],   # 第十三组
    [6.706, 5.072, 2.58, 7.146, 6.423],   # 第十四组
    [6.706, 5.072, 2.58, 7.148, 6.423],   # 第十五组
    [6.706, 5.072, 2.58, 7.148, 6.423],   # 第十六组
    [6.706, 5.075, 2.58, 7.148, 6.423],   # 第十七组
    [6.706, 5.075, 2.58, 7.148, 6.423],   # 第十八组
    [6.693, 5.075, 2.58, 7.148, 6.423],   # 第十九组
    [6.693, 5.075, 2.58, 7.15, 6.423],    # 第二十组
    [6.693, 5.075, 2.58, 7.15, 6.423],    # 第二十一组
    [6.693, 5.075, 2.58, 7.15, 6.423],    # 第二十二组
    [6.694, 5.075, 2.58, 7.15, 6.423],    # 第二十三组
    [6.706, 5.075, 2.571, 7.144, 6.423],  # 第二十四组
    [6.706, 5.073, 2.571, 7.144, 6.423],  # 第二十五组
    [6.706, 5.073, 2.58, 7.144, 6.423],   # 第二十六组
    [6.705, 5.073, 2.58, 7.144, 6.423],   # 第二十七组
    [6.705, 5.073, 2.58, 7.144, 6.423],   # 第二十八组
    [6.705, 5.075, 2.58, 7.144, 6.423],   # 第二十九组
    [6.705, 5.075, 2.58, 7.144, 6.423],   # 第三十组
    [6.705, 5.075, 2.58, 7.144, 6.423],   # 第三十一组
    [6.705, 5.075, 2.58, 7.144, 6.423],   # 第三十二组
    [6.704, 5.075, 2.58, 7.144, 6.423],   # 第三十三组
    [6.704, 5.074, 2.58, 7.144, 6.423],   # 第三十四组
    [6.705, 5.074, 2.58, 7.144, 6.423],   # 第三十五组
    [6.705, 5.074, 2.581, 7.144, 6.423],  # 第三十六组
    [6.705, 5.074, 2.581, 7.144, 6.423],  # 第三十七组
    [6.707, 5.073, 2.581, 7.144, 6.423],  # 第三十八组
    [6.708, 5.073, 2.581, 7.144, 6.423],  # 第三十九组
    [6.708, 5.073, 2.581, 7.144, 6.423],  # 第四十组
    [6.708, 5.073, 2.581, 7.144, 6.423],  # 第四十一组
    [6.708, 5.074, 2.581, 7.144, 6.423],  # 第四十二组
    [6.708, 5.074, 2.581, 7.144, 6.423],  # 第四十三组
    [6.696, 5.074, 2.581, 7.144, 6.423],  # 第四十四组
    [6.696, 5.074, 2.581, 7.144, 6.423],  # 第四十五组
    [6.696, 5.074, 2.581, 7.144, 6.423],  # 第四十六组
    [6.707, 5.074, 2.581, 7.144, 6.423],  # 第四十七组
    [6.705, 5.074, 2.581, 7.144, 6.423],  # 第四十八组
    [6.704, 5.074, 2.581, 7.144, 6.423],  # 第四十九组
    [6.704, 5.074, 2.581, 7.144, 6.423],  # 第五十组
    [6.704, 5.074, 2.581, 7.144, 6.423],  # 第五十一组
    [6.704, 5.074, 2.581, 7.144, 6.423]   # 第五十二组
]

def remove_outliers_3sigma(column_data):
    """基于3σ准则剔除异常值"""
    data = np.array(column_data)
    mean, std = np.mean(data), np.std(data)
    mask = np.abs(data - mean) <= 3 * std  # 保留在μ±3σ内的数据
    filtered_data = data[mask]
    
    # 迭代检查直到无异常值（或数据量过少）
    while len(filtered_data) > 0 and np.any(np.abs(filtered_data - np.mean(filtered_data)) > 3 * np.std(filtered_data)):
        mean, std = np.mean(filtered_data), np.std(filtered_data)
        mask = np.abs(filtered_data - mean) <= 3 * std
        filtered_data = filtered_data[mask]
    return filtered_data

# 处理每一列数据并计算均值
filtered_means = []
for i in range(5):  # 共5列数据
    column_data = [row[i] for row in laser_dist]
    filtered_data = remove_outliers_3sigma(column_data)
    if len(filtered_data) > 0:
        filtered_means.append(np.mean(filtered_data))
    else:
        filtered_means.append(np.nan)  # 标记无效列

# 输出处理后的均值
for mean in filtered_means:
    print(f"{float(mean):.3f}")

"""
6.704
5.074
2.579
7.145
6.423
"""